<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAYS Cafe</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .custom-scrollbar::-webkit-scrollbar {
            height: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-amber-50 via-rose-50 to-indigo-100">

    <header class="max-w-6xl mx-auto p-4 md:p-6 flex flex-col sm:flex-row items-center justify-between gap-4 sm:gap-8">
        <div class="flex items-center gap-2 sm:gap-4">
            <div class="w-12 h-12 sm:w-14 sm:h-14 rounded-lg shadow-lg flex items-center justify-center bg-white/60">
                <h1 class="text-lg sm:text-xl font-bold text-rose-600">AJ</h1>
            </div>
            <div>
                <h2 class="text-xl sm:text-2xl font-extrabold tracking-tight">AJAYS Cafe</h2>
                <p class="text-xs sm:text-sm text-gray-600">Stylish. Tasty. Fast.</p>
            </div>
        </div>
        <div class="text-xl text-gray-700 p-2 rounded-lg bg-white/60 w-full text-center sm:w-auto mt-2 sm:mt-0">Token: <span id="tokenDisplay" class="font-mono text-2xl font-bold"></span></div>
    </header>

    <main class="max-w-6xl mx-auto p-4 md:p-6">
        <section class="bg-gradient-to-r from-rose-100 to-yellow-50 rounded-2xl p-4 md:p-6 shadow-md flex flex-col items-center text-center">
            <div class="flex-1">
                <h3 class="text-2xl sm:text-3xl font-extrabold">Welcome to AJAYS Cafe</h3>
                <p class="mt-2 text-sm sm:text-base text-gray-700">Delicious food, handpicked for you. Select quantity and place your order easily.</p>
                <div class="mt-4 flex flex-wrap gap-3 justify-center">
                    <button id="viewMenuBtn" class="px-4 py-2 rounded-lg bg-rose-600 text-white font-semibold text-sm sm:text-base transition-all duration-300 hover:scale-105 hover:bg-rose-700">View Menu</button>
                    <button id="knowMoreBtn" class="px-4 py-2 rounded-lg border font-semibold text-sm sm:text-base transition-all duration-300 hover:bg-gray-100 hover:scale-105">Know More</button>
                </div>
            </div>
        </section>
        <section class="mt-6">
            <h4 class="font-semibold mb-2 text-lg">Categories</h4>
            <div id="categoryContainer" class="flex gap-3 overflow-x-auto py-2 custom-scrollbar"></div>
        </section>
        <section class="mt-6">
            <h4 class="font-semibold mb-4 text-lg">Menu</h4>
            <div id="menuContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </section>
    </main>

    <div class="fixed left-0 right-0 bottom-0 sm:bottom-4 flex justify-center pointer-events-none p-4 sm:p-0">
        <div class="max-w-6xl w-full sm:px-6 pointer-events-auto">
            <div class="bg-white/90 backdrop-blur-sm rounded-t-2xl sm:rounded-3xl p-4 shadow-lg flex items-center justify-between">
                <div>
                    <div class="text-xs sm:text-sm text-gray-600">Current total</div>
                    <div id="totalDisplay" class="text-lg sm:text-xl font-bold">₹0</div>
                </div>
                <div class="flex gap-2 sm:gap-3">
                    <button id="orderBtn" class="px-6 py-3 sm:px-8 sm:py-4 rounded-lg bg-rose-600 text-white font-semibold text-sm sm:text-base transition-all duration-300 hover:scale-105 hover:bg-rose-700">Order</button>
                    <button id="clearBtn" class="px-3 py-2 sm:px-4 sm:py-2 rounded-lg border text-sm sm:text-base transition-all duration-300 hover:bg-gray-100 hover:scale-105">Clear</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Summary Modal -->
    <div id="summaryModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-40">
        <div class="bg-white rounded-2xl w-11/12 md:w-2/3 lg:w-1/2 p-6 shadow-xl">
            <h4 class="text-xl font-bold">Order Summary</h4>
            <p class="text-sm text-gray-600 mt-1">Token: <span id="summaryTokenDisplay" class="font-mono"></span></p>
            <div id="summaryItemsContainer" class="mt-4 max-h-64 overflow-auto"></div>
            <div class="mt-4 flex items-center justify-between">
                <div class="text-lg font-bold">Total: <span id="summaryTotalDisplay">₹0</span></div>
                <div class="flex gap-3">
                    <button id="closeSummaryBtn" class="px-4 py-2 rounded-lg border transition-all duration-300 hover:bg-gray-100">Back</button>
                    <button id="confirmOrderBtn" class="px-4 py-2 rounded-lg bg-rose-600 text-white transition-all duration-300 hover:bg-rose-700">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Name Input Modal -->
    <div id="nameModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl w-11/12 md:w-1/3 p-6 shadow-xl relative">
            <div class="flex flex-col items-center text-center">
                <h4 class="text-xl font-bold">Your Details</h4>
                <p class="mt-2 text-sm text-gray-600">Please enter your name to confirm the order.</p>
                <input id="nameInput" placeholder="Enter name" class="mt-4 w-full text-lg px-3 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-rose-300" />
                <button id="submitNameBtn" class="mt-6 px-6 py-2 rounded-lg bg-rose-600 text-white font-semibold transition-all duration-300 hover:bg-rose-700">Submit</button>
            </div>
        </div>
    </div>

    <!-- Token Display Modal -->
    <div id="tokenModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl w-11/12 md:w-1/3 p-6 shadow-xl relative flex flex-col items-center text-center">
            <h4 class="text-xl font-bold">Order Confirmed!</h4>
            <p class="mt-2 text-sm text-gray-600">Your token number is:</p>
            <div id="tokenNumberDisplay" class="text-6xl font-extrabold text-rose-600 mt-4"></div>
            <p class="mt-4 text-sm text-gray-600">Your order has been saved successfully.</p>
            <button id="completeOrderBtn" class="mt-6 px-8 py-3 rounded-lg bg-green-600 text-white font-semibold transition-all duration-300 hover:bg-green-700">Complete Order</button>
        </div>
    </div>
    
    <!-- Message Modal -->
    <div id="messageModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl w-11/12 md:w-1/3 p-6 shadow-xl relative">
             <button id="closeMessageModalBtn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-900 transition-all duration-300 hover:scale-110">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <div class="flex flex-col items-center text-center">
                <p id="modalMessageText" class="mt-4 text-lg font-semibold"></p>
                <button id="modalMessageOkayBtn" class="mt-6 px-6 py-2 rounded-lg bg-rose-600 text-white font-semibold transition-all duration-300 hover:bg-rose-700">Okay</button>
            </div>
        </div>
    </div>

    <!-- Details Modal -->
    <div id="detailsModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl w-11/12 md:w-1/3 p-6 shadow-xl relative">
            <button id="closeDetailsModalBtn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-900 transition-all duration-300 hover:scale-110">
                 <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <div class="flex flex-col items-center text-center">
                <h4 class="text-xl font-bold">AJAYS Cafe Details</h4>
                <div class="mt-4 text-left w-full space-y-2">
                    <p class="text-sm"><span class="font-semibold">Address:</span> 123 Cafe Street, Food City, 56789</p>
                    <p class="text-sm"><span class="font-semibold">Mobile Number:</span> +91 98247 80507</p>
                    <p class="text-sm"><span class="font-semibold">Email:</span> ajayscafe@example.com</p>
                    <p class="text-sm"><span class="font-semibold">Opening Time:</span> 9:00 AM</p>
                    <p class="text-sm"><span class="font-semibold">Closing Time:</span> 10:00 PM</p>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="mt-12 pb-24 sm:pb-32 text-center text-xs sm:text-sm text-gray-600">
        © <span id="currentYear"></span> AJAYS Cafe — Crafted with love
    </footer>

    <script>
        // =================================================================
        // SECTION 1: CONFIGURATION & GLOBAL VARIABLES
        // =================================================================

        // --- GOOGLE SHEETS API DETAILS ---
        const GOOGLE_SHEETS_API_KEY = 'AIzaSyAGFO7TWXuTv4mxmr6mvMRTqE7Y_FcFMbs';
        const MENU_SPREADSHEET_ID = '1smEjMFME5KM0-nZXDry9yFiYC3DYzIXDfEDLNvSNRPI';
        const ORDERS_SPREADSHEET_ID = '1IGvU3FG-waMxGYNpKrFT8k8uDh6PuZ1aGj8KUnb8urw';
        const MENU_SHEET_NAME = 'Sheet1'; // Name of the sheet containing menu items
        const ORDERS_SHEET_NAME = 'Sheet1'; // Name of the sheet to store orders

        // --- GLOBAL STATE VARIABLES ---
        let initialFoods = [];
        let foods = [];
        let searchCategory = "All";
        let userName = "";
        let tokenCounter = getTokenCounter();

        // =================================================================
        // SECTION 2: DOM ELEMENT REFERENCES
        // =================================================================

        const menuContainer = document.getElementById("menuContainer");
        const categoryContainer = document.getElementById("categoryContainer");
        const totalDisplay = document.getElementById("totalDisplay");
        const tokenDisplay = document.getElementById("tokenDisplay");
        const summaryModal = document.getElementById("summaryModal");
        const summaryItemsContainer = document.getElementById("summaryItemsContainer");
        const summaryTotalDisplay = document.getElementById("summaryTotalDisplay");
        const summaryTokenDisplay = document.getElementById("summaryTokenDisplay");
        const messageModal = document.getElementById("messageModal");
        const modalMessageText = document.getElementById("modalMessageText");
        const nameModal = document.getElementById("nameModal");
        const nameInput = document.getElementById("nameInput");
        const detailsModal = document.getElementById("detailsModal");
        const tokenModal = document.getElementById("tokenModal");
        const tokenNumberDisplay = document.getElementById("tokenNumberDisplay");

        // =================================================================
        // SECTION 3: CORE FUNCTIONS
        // =================================================================

        /**
         * Gets the token counter from local storage, ensuring it's within a valid range.
         */
        function getTokenCounter() {
            try {
                const v = localStorage.getItem("ajays_token_counter");
                const counter = v ? Number(v) : 1;
                return counter > 0 && counter <= 1000 ? counter : 1;
            } catch (e) {
                return 1;
            }
        }

        /**
         * Saves the current token counter to local storage.
         */
        function saveTokenCounter() {
            try {
                localStorage.setItem("ajays_token_counter", String(tokenCounter));
            } catch (e) {
                console.error("Failed to save token counter:", e);
            }
        }

        /**
         * Displays a message in the message modal.
         * @param {string} message - The message to display.
         */
        function showModalMessage(message) {
            modalMessageText.textContent = message;
            messageModal.classList.remove("hidden");
        }

        /**
         * Hides all modals.
         */
        function closeModal() {
            summaryModal.classList.add("hidden");
            messageModal.classList.add("hidden");
            nameModal.classList.add("hidden");
            detailsModal.classList.add("hidden");
            tokenModal.classList.add("hidden");
        }

        /**
         * Calculates the total price of items in the cart.
         * @returns {number} The total price.
         */
        function computeTotal() {
            return foods.reduce((sum, food) => sum + (food.price * food.qty), 0);
        }

        /**
         * Updates the total price display in the main UI.
         */
        function updateTotalDisplay() {
            totalDisplay.textContent = `₹${computeTotal()}`;
        }

        /**
         * Updates the token number display in the header.
         */
        function updateTokenDisplay() {
            tokenDisplay.textContent = `${tokenCounter}`;
        }

        /**
         * Renders the menu items based on the selected category.
         */
        function renderFoods() {
            const filteredFoods = searchCategory === "All" 
                ? foods 
                : foods.filter(f => f.category === searchCategory);
            
            menuContainer.innerHTML = filteredFoods.map(food => `
                <div class="bg-white rounded-2xl shadow-md overflow-hidden">
                    <div class="h-48 sm:h-64 overflow-hidden">
                        <img src="${food.image}" alt="${food.name}" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x300/e5e7eb/4b5563?text=Image+Not+Found';">
                    </div>
                    <div class="p-4 pt-2">
                        <div class="flex justify-between items-start">
                            <div>
                                <h5 class="font-bold text-lg sm:text-2xl">${food.name}</h5>
                                <p class="text-xs text-gray-500">${food.category}</p>
                            </div>
                            <div class="text-rose-600 font-bold text-xl sm:text-2xl">₹${food.price}</div>
                        </div>
                        <div class="mt-4 flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <button class="qty-btn px-4 py-2 rounded-full bg-gray-100 text-base sm:text-lg font-bold transition-all duration-300 hover:bg-gray-200" data-id="${food.id}" data-delta="-1">-</button>
                                <div class="w-6 text-center font-mono text-base sm:text-lg font-semibold" data-id="${food.id}-qty">${food.qty}</div>
                                <button class="qty-btn px-4 py-2 rounded-full bg-gray-100 text-base sm:text-lg font-bold transition-all duration-300 hover:bg-gray-200" data-id="${food.id}" data-delta="1">+</button>
                            </div>
                            <button class="add-btn px-6 py-2 rounded-full bg-rose-600 text-white text-base sm:text-lg font-semibold transition-all duration-300 hover:bg-rose-700" data-id="${food.id}">Add</button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            updateTotalDisplay();
        }

        /**
         * Renders the category filter buttons.
         */
        function renderCategories() {
            const categories = ["All", ...new Set(initialFoods.map(f => f.category).filter(Boolean))];
            categoryContainer.innerHTML = categories.map(cat => `
                <button class="category-btn min-w-max px-6 py-3 rounded-lg shadow-sm text-base sm:text-lg font-semibold transition-all duration-300 hover:scale-105 ${searchCategory === cat ? 'bg-rose-600 text-white hover:bg-rose-700' : 'bg-white hover:bg-gray-100'}" data-category="${cat}">
                    ${cat}
                </button>
            `).join('');
        }

        // =================================================================
        // SECTION 4: EVENT HANDLERS & API INTERACTIONS
        // =================================================================

        /**
         * Clears the shopping cart and resets quantities.
         */
        function clearCart() {
            foods = initialFoods.map(f => ({ ...f, qty: 0 }));
            userName = "";
            nameInput.value = "";
            renderFoods();
            updateTotalDisplay();
            updateTokenDisplay();
        }

        /**
         * Handles clicks on quantity buttons and add buttons for menu items.
         */
        function handleFoodItemClick(e) {
            const target = e.target;
            const id = parseInt(target.dataset.id);
            const food = foods.find(f => f.id === id);

            if (!food) return;

            if (target.classList.contains("qty-btn")) {
                const delta = parseInt(target.dataset.delta);
                food.qty = Math.max(0, food.qty + delta);
            } else if (target.classList.contains("add-btn")) {
                food.qty++;
            }

            const qtyElement = document.querySelector(`[data-id="${id}-qty"]`);
            if (qtyElement) qtyElement.textContent = food.qty;
            
            updateTotalDisplay();
        }

        /**
         * Handles clicks on category buttons to filter the menu.
         */
        function handleCategoryClick(e) {
            if (e.target.classList.contains("category-btn")) {
                searchCategory = e.target.dataset.category;
                renderCategories();
                renderFoods();
            }
        }

        /**
         * Opens the order summary modal if items are selected.
         */
        function openOrderSummary() {
            const selectedFoods = foods.filter(f => f.qty > 0);
            if (selectedFoods.length === 0) {
                showModalMessage("Please add items to your order first.");
                return;
            }

            summaryItemsContainer.innerHTML = selectedFoods.map(item => `
                <div class="flex items-center justify-between py-2 border-b">
                    <div>
                        <div class="font-semibold">${item.name}</div>
                        <div class="text-sm text-gray-500">${item.qty} x ₹${item.price}</div>
                    </div>
                    <div class="font-semibold">₹${item.qty * item.price}</div>
                </div>
            `).join('');

            summaryTotalDisplay.textContent = `₹${computeTotal()}`;
            summaryTokenDisplay.textContent = `${tokenCounter}`;
            summaryModal.classList.remove("hidden");
        }

        /**
         * Opens the modal to ask for the user's name.
         */
        function openNameModal() {
            if (computeTotal() === 0) {
                showModalMessage("Your cart is empty. Please add items to order.");
                return;
            }
            nameModal.classList.remove("hidden");
            nameInput.focus();
        }

        /**
         * Validates and submits the user's name, then proceeds to order summary.
         */
        function submitName() {
            const currentUserName = nameInput.value.trim();
            const nameRegex = /^[a-zA-Z\s]{2,}$/;

            if (!nameRegex.test(currentUserName)) {
                showModalMessage("Please enter a valid name (at least 2 characters, letters and spaces only).");
                return;
            }

            userName = currentUserName;
            closeModal();
            openOrderSummary();
        }

        /**
         * Confirms the order and saves it to Google Sheets.
         */
        async function confirmOrder() {
            if (!userName) {
                showModalMessage("Please enter your name first.");
                return;
            }

            const selectedFoods = foods.filter(f => f.qty > 0);
            if (selectedFoods.length === 0) {
                showModalMessage("Your cart is empty. Please add items to order.");
                return;
            }

            // Show loading state
            const confirmBtn = document.getElementById("confirmOrderBtn");
            const originalText = confirmBtn.textContent;
            confirmBtn.disabled = true;
            confirmBtn.textContent = "Saving Order...";

            const orderData = {
                name: userName,
                token: `A${tokenCounter}`,
                total: computeTotal(),
                items: selectedFoods.map(item => ({ name: item.name, qty: item.qty, price: item.price }))
            };

            const isOrderSaved = await saveOrderToGoogleSheets(orderData);

            // Reset button state
            confirmBtn.disabled = false;
            confirmBtn.textContent = originalText;

            if (isOrderSaved) {
                closeModal();
                tokenNumberDisplay.textContent = `A${tokenCounter}`;
                tokenModal.classList.remove("hidden");
                
                // Increment token counter for next order
                tokenCounter = (tokenCounter % 1000) + 1;
                saveTokenCounter();
                updateTokenDisplay();
            }
        }

        /**
         * Saves the order details to Google Sheets.
         */
        async function saveOrderToGoogleSheets(orderData) {
            const itemsString = orderData.items.map(item => `${item.name} (Qty: ${item.qty})`).join('; ');
            const timestamp = new Date().toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' });
            
            // Prepare the row data
            const rowData = [
                [orderData.name, orderData.token, orderData.total, itemsString, timestamp]
            ];

            try {
                // First, get the current data to find the next row
                const getUrl = `https://sheets.googleapis.com/v4/spreadsheets/${ORDERS_SPREADSHEET_ID}/values/${ORDERS_SHEET_NAME}?key=${GOOGLE_SHEETS_API_KEY}`;
                const getResponse = await fetch(getUrl);
                
                if (!getResponse.ok) {
                    throw new Error(`Failed to get sheet data: ${getResponse.statusText}`);
                }
                
                const getData = await getResponse.json();
                const nextRow = (getData.values ? getData.values.length : 0) + 1;
                
                // Append the new order
                const appendUrl = `https://sheets.googleapis.com/v4/spreadsheets/${ORDERS_SPREADSHEET_ID}/values/${ORDERS_SHEET_NAME}:append?valueInputOption=RAW&key=${GOOGLE_SHEETS_API_KEY}`;
                
                const appendResponse = await fetch(appendUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        values: rowData
                    })
                });

                if (!appendResponse.ok) {
                    const errorData = await appendResponse.json();
                    throw new Error(`Google Sheets API Error: ${JSON.stringify(errorData)}`);
                }

                console.log('Order saved successfully to Google Sheets');
                return true;
                
            } catch (e) {
                console.error("Error saving order to Google Sheets:", e);
                showModalMessage("Order saving failed. Please try again.");
                return false;
            }
        }

        /**
         * Completes the order process and resets the cart.
         */
        function completeOrder() {
            clearCart();
            closeModal();
            showModalMessage("Your order has been saved successfully. Thank you!");
        }

        // =================================================================
        // SECTION 5: INITIALIZATION & EVENT LISTENERS
        // =================================================================

        /**
         * Fetches the menu data from Google Sheets.
         */
        async function fetchMenu() {
            try {
                menuContainer.innerHTML = `<p class="text-center col-span-full">Loading menu...</p>`;
                
                const url = `https://sheets.googleapis.com/v4/spreadsheets/${MENU_SPREADSHEET_ID}/values/${MENU_SHEET_NAME}?key=${GOOGLE_SHEETS_API_KEY}`;
                const response = await fetch(url);

                if (!response.ok) {
                    throw new Error(`Network response was not ok: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                if (!data.values || data.values.length === 0) {
                    throw new Error("No data found in the sheet");
                }
                
                // Assuming the first row contains headers: id, name, category, price, image
                const headers = data.values[0];
                const rows = data.values.slice(1);
                
                initialFoods = rows.map((row, index) => {
                    const food = {};
                    headers.forEach((header, i) => {
                        if (header.toLowerCase() === 'price') {
                            food[header.toLowerCase()] = parseFloat(row[i] || 0);
                        } else if (header.toLowerCase() === 'id') {
                            food[header.toLowerCase()] = parseInt(row[i] || index + 1);
                        } else {
                            food[header.toLowerCase()] = row[i] || '';
                        }
                    });
                    return food;
                });
                
                foods = initialFoods.map(f => ({ ...f, qty: 0 }));

            } catch (e) {
                console.error("Error fetching menu:", e);
                showModalMessage("Could not load the menu. Please check Google Sheets API details.");
                menuContainer.innerHTML = `<p class="text-center text-red-600 col-span-full">Failed to load menu. Please check Google Sheets configuration.</p>`;
            }
        }

        /**
         * Sets up all the event listeners for the application.
         */
        function setupEventListeners() {
            document.getElementById("viewMenuBtn").addEventListener("click", () => document.getElementById("menuContainer").scrollIntoView({ behavior: 'smooth' }));
            document.getElementById("knowMoreBtn").addEventListener("click", () => detailsModal.classList.remove("hidden"));
            document.getElementById("orderBtn").addEventListener("click", openNameModal);
            document.getElementById("clearBtn").addEventListener("click", clearCart);
            menuContainer.addEventListener("click", handleFoodItemClick);
            categoryContainer.addEventListener("click", handleCategoryClick);
            document.getElementById("closeSummaryBtn").addEventListener("click", closeModal);
            document.getElementById("confirmOrderBtn").addEventListener("click", confirmOrder);
            document.getElementById("closeMessageModalBtn").addEventListener("click", closeModal);
            document.getElementById("modalMessageOkayBtn").addEventListener("click", closeModal);
            document.getElementById("closeDetailsModalBtn").addEventListener("click", closeModal);
            document.getElementById("submitNameBtn").addEventListener("click", submitName);
            nameInput.addEventListener
